"use strict";function testWebP(r){var e=new Image;e.onload=e.onerror=function(){r(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function ibg(){for(var r=document.querySelectorAll(".ibg"),e=0;e<r.length;e++)r[e].querySelector("img")&&(r[e].style.backgroundImage="url("+r[e].querySelector("img").getAttribute("src")+")")}function intro(){var r=$(window).outerHeight();$(".intro").css("min-height",r)}testWebP((function(r){1==r?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),ibg(),$(window).resize((function(r){intro()})),intro(),$(window).scroll((function(r){var e=0-$(this).scrollTop()/3;$(".intro__bg").css("transform","translate3d(0,"+e+"px,0)")})),window.addEventListener("load",(function(){baguetteBox.run(".gallery")}));var mixer=mixitup(".portfolio__items");function forms(){$("input,textarea").focus((function(){$(this).val()==$(this).attr("data-value")&&($(this).addClass("focus"),$(this).parent().addClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","password"),$(this).val("")),removeError($(this))})),$.each($("input.phone"),(function(r,e){$(this).attr("type","tel"),$(this).focus((function(){$(this).inputmask("+7(999) 999 9999",{clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){maskclear($(this))}}),$(this).addClass("focus"),$(this).parent().addClass("focus"),$(this).parent().removeClass("err"),$(this).removeClass("err")}))})),$("input.phone").focusout((function(r){maskclear($(this))})),$.each($("input.num"),(function(r,e){$(this).focus((function(){$(this).inputmask("9{1,1000}",{clearIncomplete:!0,placeholder:"",clearMaskOnLostFocus:!0,onincomplete:function(){maskclear($(this))}}),$(this).addClass("focus"),$(this).parent().addClass("focus"),$(this).parent().removeClass("err"),$(this).removeClass("err")}))})),$("input.num").focusout((function(r){maskclear($(this))}))}function digi(r){return r.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}function formValidate(r){var e=0,a=r.parents("form");if("email"==r.attr("name")||r.hasClass("email")){if(r.val()!=r.attr("data-value")){var t=r.val().replace(" ","");r.val(t)}/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(r.val())&&r.val()!=r.attr("data-value")?removeError(r):(e++,addError(r))}else""==r.val()||r.val()==r.attr("data-value")?(e++,addError(r)):removeError(r);return"checkbox"==r.attr("type")&&(1==r.prop("checked")?r.removeClass("err").parent().removeClass("err"):(e++,r.addClass("err").parent().addClass("err"))),r.hasClass("name")&&(/^[А-Яа-яa-zA-Z-]+( [А-Яа-яa-zA-Z-]+)$/.test(r.val())||(e++,addError(r))),r.hasClass("pass-2")&&(a.find(".pass-1").val()!=a.find(".pass-2").val()?addError(r):removeError(r)),e}function clearForm(r){$.each(r.find(".input"),(function(r,e){$(this).removeClass("focus").val($(this).data("value")),$(this).parent().removeClass("focus"),$(this).hasClass("phone")&&maskclear($(this))}))}function addError(r){if(r.addClass("err"),r.parent().addClass("err"),r.parent().find(".form__error").remove(),r.hasClass("email")){var e="";null!=(e=(""==r.val()||(r.val(),r.attr("data-value")),r.data("error")))&&r.parent().append('<div class="form__error">'+e+"</div>")}else null!=r.data("error")&&0==r.parent().find(".form__error").length&&r.parent().append('<div class="form__error">'+r.data("error")+"</div>");r.parents(".select-block").length>0&&(r.parents(".select-block").parent().addClass("err"),r.parents(".select-block").find(".select").addClass("err"))}function removeError(r){r.removeClass("err"),r.parent().removeClass("err"),r.parent().find(".form__error").remove(),r.parents(".select-block").length>0&&(r.parents(".select-block").parent().removeClass("err"),r.parents(".select-block").find(".select").removeClass("err").removeClass("active"))}function removeFormErrors(r){r.find(".err").removeClass("err"),r.find(".form__error").remove()}function maskclear(r){""==r.val()&&(r.inputmask("remove"),r.val(r.attr("data-value")),r.removeClass("focus"),r.parent().removeClass("focus"))}$(".goto").click((function(){var r=$(this).attr("href").replace("#","");return $("body,html").animate({scrollTop:$("."+r).offset().top+0},700,(function(){})),!1})),forms(),$("form button[type=submit]").click((function(){var r=0,e=$(this).parents("form"),a=e.data("ms");return $.each(e.find(".req"),(function(e,a){r+=formValidate($(this))})),0==r&&(removeFormError(e),null!=a&&""!=a?(showMessageByClass(a),!1):void 0)}));